"use strict";(globalThis.webpackChunkrock_docs=globalThis.webpackChunkrock_docs||[]).push([[9418],{2745(n,e,s){s.r(e),s.d(e,{assets:()=>r,contentTitle:()=>t,default:()=>x,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"References/api","title":"API Reference","description":"This guide provides detailed information about the core API services provided by the ROCK platform, including sandbox environment management and GEM environment interaction.","source":"@site/versioned_docs/version-0.2.x/References/api.md","sourceDirName":"References","slug":"/References/api","permalink":"/ROCK/docs/0.2.x/References/api","draft":false,"unlisted":false,"editUrl":"https://github.com/alibaba/ROCK/tree/master/docs/versioned_docs/version-0.2.x/References/api.md","tags":[],"version":"0.2.x","lastUpdatedAt":1769744643000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/ROCK/docs/0.2.x/User Guides/configuration"},"next":{"title":"Python SDK Reference","permalink":"/ROCK/docs/0.2.x/References/Python SDK References/python_sdk"}}');var a=s(4848),l=s(8453);const o={sidebar_position:1},t="API Reference",r={},d=[{value:"1. Overview",id:"1-overview",level:2},{value:"2. Sandbox API",id:"2-sandbox-api",level:2},{value:"Sandbox Management Interfaces",id:"sandbox-management-interfaces",level:3},{value:"Command Execution Interfaces",id:"command-execution-interfaces",level:3},{value:"File Operation Interfaces",id:"file-operation-interfaces",level:3},{value:"3. GEM API",id:"3-gem-api",level:2},{value:"4. HTTP API Usage Examples",id:"4-http-api-usage-examples",level:2},{value:"4.1 Sandbox API Examples",id:"41-sandbox-api-examples",level:3},{value:"Start Sandbox",id:"start-sandbox",level:4},{value:"Asynchronously Start Sandbox",id:"asynchronously-start-sandbox",level:4},{value:"Execute Command",id:"execute-command",level:4},{value:"Create Session",id:"create-session",level:4},{value:"Run Command in Session",id:"run-command-in-session",level:4},{value:"Upload File",id:"upload-file",level:4},{value:"Stop Sandbox",id:"stop-sandbox",level:4},{value:"4.2 GEM API Examples",id:"42-gem-api-examples",level:3},{value:"Related Documents",id:"related-documents",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"api-reference",children:"API Reference"})}),"\n",(0,a.jsx)(e.p,{children:"This guide provides detailed information about the core API services provided by the ROCK platform, including sandbox environment management and GEM environment interaction."}),"\n",(0,a.jsx)(e.h2,{id:"1-overview",children:"1. Overview"}),"\n",(0,a.jsx)(e.p,{children:"The ROCK platform provides two core API services:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Sandbox API: Sandbox environment management"}),"\n",(0,a.jsx)(e.li,{children:"GEM API: GEM environment interaction"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"All API interfaces follow RESTful design principles and support JSON format data exchange."}),"\n",(0,a.jsx)(e.h2,{id:"2-sandbox-api",children:"2. Sandbox API"}),"\n",(0,a.jsx)(e.p,{children:"Full lifecycle management functions for sandbox environments:"}),"\n",(0,a.jsx)(e.h3,{id:"sandbox-management-interfaces",children:"Sandbox Management Interfaces"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Start Sandbox"})," - Start a sandbox environment"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Create a new sandbox instance"}),"\n",(0,a.jsx)(e.li,{children:"Support specifying image, resource configuration and other parameters"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Start Sandbox Async"})," - Asynchronously start a sandbox environment"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Asynchronously create a sandbox instance"}),"\n",(0,a.jsx)(e.li,{children:"Suitable for scenarios requiring quick response"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Check Sandbox Alive Status"})," - Check sandbox alive status"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Verify if the sandbox is running normally"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Get Sandbox Statistics"})," - Get sandbox statistics"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Get resource usage statistics of the sandbox"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Get Sandbox Status"})," - Get detailed sandbox status"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Get complete status information of the sandbox"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Stop Sandbox"})," - Stop sandbox environment"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Safely shut down the sandbox instance"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Commit Sandbox"})," - Commit sandbox as image"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Save current sandbox state as a new image"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"command-execution-interfaces",children:"Command Execution Interfaces"}),"\n",(0,a.jsxs)(e.ol,{start:"8",children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Execute Command"})," - Execute command in sandbox"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Run specified command directly in the sandbox"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Create Bash Session"})," - Create Bash session"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Create a persistent Bash session environment"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Run Command in Session"})," - Run command in session"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Execute command in a created session"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Close Session"})," - Close session"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Release session resources"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"file-operation-interfaces",children:"File Operation Interfaces"}),"\n",(0,a.jsxs)(e.ol,{start:"12",children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Read File"})," - Read sandbox file"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Read specified file content from the sandbox"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Write File"})," - Write sandbox file"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Write file to the sandbox"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Upload File"})," - Upload file to sandbox"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Upload local file to the sandbox"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"3-gem-api",children:"3. GEM API"}),"\n",(0,a.jsx)(e.p,{children:"GEM environment interaction functions:"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Make Environment"})," - Create GEM environment"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Initialize a new GEM environment instance"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Reset Environment"})," - Reset GEM environment"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Reset GEM environment to initial state"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Step Environment"})," - Execute GEM environment step"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Execute an action step in the GEM environment"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Close Environment"})," - Close GEM environment"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Release GEM environment resources"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"4-http-api-usage-examples",children:"4. HTTP API Usage Examples"}),"\n",(0,a.jsx)(e.h3,{id:"41-sandbox-api-examples",children:"4.1 Sandbox API Examples"}),"\n",(0,a.jsx)(e.h4,{id:"start-sandbox",children:"Start Sandbox"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST \'http://localhost:8080/apis/envs/sandbox/v1/start\' \\\n-H \'Content-Type: application/json\' \\\n-d \'{\n  "image": "python:3.11",\n  "resources": {\n    "cpu": "2",\n    "memory": "8g"\n  }\n}\'\n'})}),"\n",(0,a.jsx)(e.h4,{id:"asynchronously-start-sandbox",children:"Asynchronously Start Sandbox"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST \'http://localhost:8080/apis/envs/sandbox/v1/start_async\' \\\n-H \'Content-Type: application/json\' \\\n-d \'{\n  "image": "python:3.11",\n  "resources": {\n    "cpu": "2",\n    "memory": "8g"\n  }\n}\'\n'})}),"\n",(0,a.jsx)(e.h4,{id:"execute-command",children:"Execute Command"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST \'http://localhost:8080/apis/envs/sandbox/v1/execute\' \\\n-H \'Content-Type: application/json\' \\\n-d \'{\n  "sandbox_id": "sandbox-12345",\n  "command": "ls -la"\n}\'\n'})}),"\n",(0,a.jsx)(e.h4,{id:"create-session",children:"Create Session"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST \'http://localhost:8080/apis/envs/sandbox/v1/create_session\' \\\n-H \'Content-Type: application/json\' \\\n-d \'{\n  "sandbox_id": "sandbox-12345",\n  "session": "my_session"\n}\'\n'})}),"\n",(0,a.jsx)(e.h4,{id:"run-command-in-session",children:"Run Command in Session"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST \'http://localhost:8080/apis/envs/sandbox/v1/run_in_session\' \\\n-H \'Content-Type: application/json\' \\\n-d \'{\n  "sandbox_id": "sandbox-12345",\n  "session": "my_session",\n  "command": "python script.py"\n}\'\n'})}),"\n",(0,a.jsx)(e.h4,{id:"upload-file",children:"Upload File"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -X POST 'http://localhost:8080/apis/envs/sandbox/v1/upload' \\\n-F 'file=@./local_file.txt' \\\n-F 'target_path=./remote_file.txt' \\\n-F 'sandbox_id=sandbox-12345'\n"})}),"\n",(0,a.jsx)(e.h4,{id:"stop-sandbox",children:"Stop Sandbox"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl -X POST 'http://localhost:8080/apis/envs/sandbox/v1/stop' \\\n-H 'Content-Type: application/json' \\\n-d '{\n  \"sandbox_id\": \"sandbox-12345\"\n}'\n"})}),"\n",(0,a.jsx)(e.h3,{id:"42-gem-api-examples",children:"4.2 GEM API Examples"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# Create GEM environment\ncurl -X POST 'http://localhost:8080/apis/v1/envs/gem/make' \\\n-H 'Content-Type: application/json' \\\n-d '{\"env_id\": \"game:Sokoban-v0-easy\"}'\n\n# Reset environment\ncurl -X POST 'http://localhost:8080/apis/v1/envs/gem/reset' \\\n-H 'Content-Type: application/json' \\\n-d '{\"sandbox_id\": \"sandbox-12345\", \"seed\": 42}'\n\n# Execute step\ncurl -X POST 'http://localhost:8080/apis/v1/envs/gem/step' \\\n-H 'Content-Type: application/json' \\\n-d '{\"sandbox_id\": \"sandbox-12345\", \"action\": \"random_action\"}'\n\n# Close environment\ncurl -X POST 'http://localhost:8080/apis/v1/envs/gem/close' \\\n-H 'Content-Type: application/json' \\\n-d '{\"sandbox_id\": \"sandbox-12345\"}'\n"})}),"\n",(0,a.jsx)(e.h2,{id:"related-documents",children:"Related Documents"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"/ROCK/docs/0.2.x/Getting%20Started/quickstart",children:"Quick Start Guide"})," - Learn how to quickly get started with ROCK API"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"/ROCK/docs/0.2.x/References/Python%20SDK%20References/python_sdk",children:"Python SDK Documentation"})," - Learn how to use the SDK to call APIs"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"/ROCK/docs/0.2.x/User%20Guides/configuration",children:"Configuration Guide"})," - Learn about API-related configuration options"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.a,{href:"/ROCK/docs/0.2.x/Getting%20Started/installation",children:"Installation Guide"})," - Detailed information about ROCK installation and setup"]}),"\n"]})]})}function x(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(c,{...n})}):c(n)}},8453(n,e,s){s.d(e,{R:()=>o,x:()=>t});var i=s(6540);const a={},l=i.createContext(a);function o(n){const e=i.useContext(l);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:o(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);