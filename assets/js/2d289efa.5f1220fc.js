"use strict";(globalThis.webpackChunkrock_docs=globalThis.webpackChunkrock_docs||[]).push([[5186],{38331(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Getting Started/rockroll","title":"ROCK & ROLL Quick Start Guide","description":"This guide will walk you through running a reinforcement learning training example based on the Sokoban game, using ROLL (the training framework) and ROCK (the environment management tool).","source":"@site/versioned_docs/version-1.2.x/Getting Started/rockroll.md","sourceDirName":"Getting Started","slug":"/Getting Started/rockroll","permalink":"/ROCK/docs/Getting Started/rockroll","draft":false,"unlisted":false,"editUrl":"https://github.com/alibaba/ROCK/tree/master/docs/versioned_docs/version-1.2.x/Getting Started/rockroll.md","tags":[],"version":"1.2.x","lastUpdatedAt":1770690437000,"sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Rock Agent Quick Start","permalink":"/ROCK/docs/Getting Started/rock-agent"},"next":{"title":"Configuration","permalink":"/ROCK/docs/User Guides/configuration"}}');var r=i(74848),s=i(28453);const o={sidebar_position:7},a="ROCK & ROLL Quick Start Guide",l={},c=[{value:"1. Prerequisites",id:"1-prerequisites",level:2},{value:"1.1 System Requirements",id:"11-system-requirements",level:3},{value:"1.2 Verify Dependencies &amp; Pre-pull Image",id:"12-verify-dependencies--pre-pull-image",level:3},{value:"1.3 Initialize the Project",id:"13-initialize-the-project",level:3},{value:"2. Launch the Training Process",id:"2-launch-the-training-process",level:2},{value:"Option 1: Using a Virtual Environment (Recommended)",id:"option-1-using-a-virtual-environment-recommended",level:3},{value:"Why is this method recommended?",id:"why-is-this-method-recommended",level:4},{value:"Option 2: Using the System Environment (Alternative)",id:"option-2-using-the-system-environment-alternative",level:3},{value:"Warning",id:"warning",level:4},{value:"3. Multi-Node Deployment",id:"3-multi-node-deployment",level:2},{value:"3.1  Deploy the ROCK Service on Machine A",id:"31--deploy-the-rock-service-on-machine-a",level:3},{value:"3.2 Prepare the ROLL Client on Machine B",id:"32-prepare-the-roll-client-on-machine-b",level:3},{value:"Advanced: Distributed ROLL Training",id:"advanced-distributed-roll-training",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"rock--roll-quick-start-guide",children:"ROCK & ROLL Quick Start Guide"})}),"\n",(0,r.jsx)(n.p,{children:"This guide will walk you through running a reinforcement learning training example based on the Sokoban game, using ROLL (the training framework) and ROCK (the environment management tool)."}),"\n",(0,r.jsx)(n.h2,{id:"1-prerequisites",children:"1. Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before you begin, please ensure your system has the following dependencies installed."}),"\n",(0,r.jsx)(n.h3,{id:"11-system-requirements",children:"1.1 System Requirements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"OS"}),": A Linux-based system is recommended (e.g., Ubuntu 20.04+)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hardware"}),": An NVIDIA GPU with the corresponding drivers is recommended."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Docker"}),": ROCK uses Docker for containerized environment management."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"uv"}),": ROCK uses uv for dependency management and virtual environment creation."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"12-verify-dependencies--pre-pull-image",children:"1.2 Verify Dependencies & Pre-pull Image"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Verify Docker installation\ndocker --version\n\n# Verify Docker is running and pre-pull the Sokoban environment image\n# This will save time when the training starts.\ndocker pull rock-n-roll-registry.cn-hangzhou.cr.aliyuncs.com/rock/sokoban-sandbox:latest\n\n# Verify uv installation\nuv --version\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"13-initialize-the-project",children:"1.3 Initialize the Project"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Clone the project repositories\ngit clone https://github.com/alibaba/ROCK.git\ngit clone https://github.com/alibaba/ROLL.git\n\n# Ensure both repositories are in the same parent directory, like this:\n# your-workspace/\n# \u251c\u2500\u2500 ROCK/\n# \u2514\u2500\u2500 ROLL/\n"})}),"\n",(0,r.jsx)(n.h2,{id:"2-launch-the-training-process",children:"2. Launch the Training Process"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Note: The following instructions use torch==2.6.0 and vLLM==0.8.4 as an example."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"option-1-using-a-virtual-environment-recommended",children:"Option 1: Using a Virtual Environment (Recommended)"}),"\n",(0,r.jsx)(n.h4,{id:"why-is-this-method-recommended",children:"Why is this method recommended?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Isolation: A uv virtual environment ensures that project dependencies are isolated from your system, preventing conflicts."}),"\n",(0,r.jsx)(n.li,{children:"Fast Startup: ROCK can reuse this virtual environment, significantly speeding up subsequent task initializations."}),"\n",(0,r.jsx)(n.li,{children:"Stability & Reproducibility: Dependency management is cleaner and more reliable."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to the ROCK directory\ncd ROCK\n\n# Create and activate a Python 3.10 virtual environment (ROLL recommends Python 3.10)\nuv venv --python 3.10 --python-preference only-managed\nsource .venv/bin/activate\n\n# Install all of ROCK's dependencies using uv\nuv sync --all-extras\n\n# If using Python 3.10, starting Ray may raise a `ValueError: <object object at 0x...> is not a valid Sentinel`.\n# This is due to an incompatibility between `ray` and `click` versions 8.3+.\n# To fix this, downgrade `click` to a version below 8.3. This issue does not affect Python 3.11.\nuv pip install 'click>=8.2,click<8.3'\n\n# Navigate to the ROLL directory to install its dependencies\ncd ../ROLL\n\n# Install core PyTorch components\nuv pip install torch==2.6.0 torchvision==0.21.0 torchaudio==2.6.0 \n\n# Install transformer-engine. The --no-build-isolation flag prevents errors where torch cannot be found.\nuv pip install transformer-engine[pytorch]==2.2.0 --no-build-isolation\n\n# Install a pre-compiled version of flash-attention matching the specific CUDA and PyTorch versions\nuv pip install https://github.com/Dao-AILab/flash-attention/releases/download/v2.7.2.post1/flash_attn-2.7.2.post1+cu12torch2.6cxx11abiFALSE-cp310-cp310-linux_x86_64.whl  \n\n# Install the remaining dependencies\nuv pip install -r requirements_torch260_vllm.txt\n\n# (Optional) Install Tensorboard to check training metrics\nuv pip install tensorboard -i $PYPI_MIRROR\n\n# All set! Launch the training script.\nbash examples/agentic_demo/run_agentic_pipeline_sokoban_sandbox_single_node.sh\n"})}),"\n",(0,r.jsx)(n.h3,{id:"option-2-using-the-system-environment-alternative",children:"Option 2: Using the System Environment (Alternative)"}),"\n",(0,r.jsx)(n.p,{children:"For optimal compatibility with this method, we recommend running these commands inside one of ROLL's official base Docker images. These images come pre-installed with matching CUDA, cuDNN, and other foundational libraries."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://alibaba.github.io/ROLL/docs/Getting%20Started/Installation/image_address",children:"ROLL's Official Docker Image List"})}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"warning",children:"Warning"}),"\n",(0,r.jsx)(n.p,{children:"This method will install all Python packages directly into your current environment (e.g., the container's base system), which may cause conflicts with system packages or other projects."}),"\n",(0,r.jsx)(n.p,{children:"Since ROCK cannot reuse the environment, it may need to reinstall some dependencies each time a task starts, leading to slower startup times that are dependent on network speed."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install ROCK's dependencies\ncd ROCK\npip install .\npip install \".[admin]\"\n\n# Install ROLL's dependencies\ncd ../ROLL\npip install -r requirements_torch260_vllm.txt\n\n# Crucial: Configure ROCK to use uv as its worker environment manager\nexport ROCK_WORKER_ENV_TYPE=uv\n\n# Launch the training script\nbash examples/agentic_demo/run_agentic_pipeline_sokoban_sandbox_single_node.sh\n"})}),"\n",(0,r.jsx)(n.p,{children:"You have now successfully launched the Sokoban reinforcement learning training process. Happy Rock & Roll\uff01"}),"\n",(0,r.jsx)(n.h2,{id:"3-multi-node-deployment",children:"3. Multi-Node Deployment"}),"\n",(0,r.jsxs)(n.p,{children:["Instead of running everything on a single machine, you can deploy the  ",(0,r.jsx)(n.strong,{children:"ROCK Service"})," and ",(0,r.jsx)(n.strong,{children:"ROLL job"})," on separate machines. This is a common client-server setup where they communicate over the network."]}),"\n",(0,r.jsx)(n.h3,{id:"31--deploy-the-rock-service-on-machine-a",children:"3.1  Deploy the ROCK Service on Machine A"}),"\n",(0,r.jsxs)(n.p,{children:["On a dedicated machine (or container), follow the ",(0,r.jsx)(n.a,{href:"/ROCK/docs/Getting%20Started/quickstart",children:"ROCK Quick Start Guide"})," to deploy and start the ROCK service."]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),(0,r.jsx)(n.br,{}),"\n","After starting the service, take note of its IP address and port (e.g., ",(0,r.jsx)(n.code,{children:"http://192.168.1.10:8000"}),"). You will need this address for the subsequent steps."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"32-prepare-the-roll-client-on-machine-b",children:"3.2 Prepare the ROLL Client on Machine B"}),"\n",(0,r.jsx)(n.p,{children:"On the other machine where you will run the training task, perform the following steps."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Verify Network Connectivity"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"First, use the curl command to check if you can reach the ROCK service on Machine A from Machine B."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Replace <ip_address>:<port> with the actual address of your ROCK service\n# If successful, you should receive a response like {"message":"hello, ROCK!"}\ncurl http://<ip_address>:<port>\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Prepare the ROLL Environment"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Clone the ROLL repository\ngit clone https://github.com/alibaba/ROLL.git\ncd ROLL\n\n# Install dependencies\npip install -r requirements_torch260_vllm.txt\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Configure the ROLL Connection Address"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Modify ROLL's configuration file to point to the remote ROCK service."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Open the configuration file: examples/agentic_demo/agentic_val_sokoban_sandbox.yaml."}),"\n",(0,r.jsx)(n.li,{children:'Find the "SokobanSandbox" section under "env_config".'}),"\n",(0,r.jsx)(n.li,{children:"Update the base_url value to your ROCK service's address."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"custom_envs:\n  SokobanSandbox:\n    env_config:\n      # Change the address here to your ROCK service's address\n      # Example: base_url: 'http://192.168.1.10:8000'\n      base_url: 'http://<ip_address>:<port>'\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"Start Training\nOnce configured, you can start the ROLL training script on Machine B."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# This script will now request environments from the ROCK service on Machine A over the network.\nbash examples/agentic_demo/run_agentic_pipeline_sokoban_sandbox_multi_nodes.sh\n"})}),"\n",(0,r.jsx)(n.h3,{id:"advanced-distributed-roll-training",children:"Advanced: Distributed ROLL Training"}),"\n",(0,r.jsx)(n.p,{children:"If you wish to deploy the ROLL training task itself in a distributed manner, you can refer to ROLL's official documentation for distributed deployment."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://alibaba.github.io/ROLL/docs/Getting%20Started/Quick%20Start/multi_nodes_quick_start",children:"Quick Start: Multi-Node Deployment Guide"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453(e,n,i){i.d(n,{R:()=>o,x:()=>a});var t=i(96540);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);