"use strict";(globalThis.webpackChunkrock_docs=globalThis.webpackChunkrock_docs||[]).push([[3306],{8453(e,n,r){r.d(n,{R:()=>i,x:()=>a});var s=r(6540);const o={},t=s.createContext(o);function i(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(t.Provider,{value:n},e.children)}},9901(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"References/Python SDK References/file_system","title":"FileSystem","description":"File system interface for sandbox environment operations including permission and ownership management.","source":"@site/versioned_docs/version-1.1.x/References/Python SDK References/file_system.md","sourceDirName":"References/Python SDK References","slug":"/References/Python SDK References/file_system","permalink":"/ROCK/docs/References/Python SDK References/file_system","draft":false,"unlisted":false,"editUrl":"https://github.com/alibaba/ROCK/tree/master/docs/versioned_docs/version-1.1.x/References/Python SDK References/file_system.md","tags":[],"version":"1.1.x","lastUpdatedAt":1770114841000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Deploy","permalink":"/ROCK/docs/References/Python SDK References/deploy"},"next":{"title":"Model Service (Experimental)","permalink":"/ROCK/docs/References/Python SDK References/model-service"}}');var o=r(4848),t=r(8453);const i={},a="FileSystem",c={},d=[{value:"chown - Change Owner",id:"chown---change-owner",level:2},{value:"chmod - Change Permissions",id:"chmod---change-permissions",level:2},{value:"upload_dir - Upload Directory",id:"upload_dir---upload-directory",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"filesystem",children:"FileSystem"})}),"\n",(0,o.jsx)(n.p,{children:"File system interface for sandbox environment operations including permission and ownership management."}),"\n",(0,o.jsx)(n.h2,{id:"chown---change-owner",children:"chown - Change Owner"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from rock.actions.sandbox.request import ChownRequest\n\n# Create remote user before changing ownership\nawait sandbox.remote_user.create_remote_user("deploy")\n\n# Get current working directory\npwd_response = await sandbox.execute(Command(command=["pwd"]))\npwd = pwd_response.stdout.strip()\n\n# Change directory owner\nawait sandbox.fs.chown(\n    ChownRequest(\n        paths=[pwd],\n        remote_user="deploy",\n        recursive=False,\n    )\n)\n\n# Recursively change owner for directory and contents\nawait sandbox.fs.chown(\n    ChownRequest(\n        paths=["/home/user/project"],\n        remote_user="deploy",\n        recursive=True,\n    )\n)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"chmod---change-permissions",children:"chmod - Change Permissions"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from rock.actions.sandbox.request import ChmodRequest\n\n# Create test directory\nawait sandbox.execute(Command(command=["mkdir", "-p", "/tmp/app"]))\n\n# Change directory permissions\nawait sandbox.fs.chmod(\n    ChmodRequest(\n        paths=["/tmp/app"],\n        mode="755",\n        recursive=False,\n    )\n)\n\n# Recursively change permissions (includes subdirectories and files)\nawait sandbox.fs.chmod(\n    ChmodRequest(\n        paths=["/tmp/app"],\n        mode="644",\n        recursive=True,\n    )\n)\n\n# Set maximum permissions\nawait sandbox.fs.chmod(\n    ChmodRequest(\n        paths=["/tmp/shared"],\n        mode="777",\n        recursive=True,\n    )\n)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"upload_dir---upload-directory",children:"upload_dir - Upload Directory"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'import os\nfrom pathlib import Path\n\n# Prepare local directory\nlocal_dir = Path("/Users/foo/my-project")\n(local_dir / "config.json").write_text(\'{"key": "value"}\')\n(local_dir / "app.py").write_text("print(\'hello\')")\n\n# Upload to sandbox\nresult = await sandbox.fs.upload_dir(\n    source_dir=str(local_dir),\n    target_dir="/root/project",\n    extract_timeout=600,\n)\n\nif result.exit_code == 0:\n    print(f"Upload success: {result.output}")\nelse:\n    print(f"Upload failed: {result.failure_reason}")\n'})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);