"use strict";(globalThis.webpackChunkrock_docs=globalThis.webpackChunkrock_docs||[]).push([[2165],{54552(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"References/Python SDK References/codes","title":"Error Codes","description":"\u9519\u8bef\u7801\u5b9a\u4e49\u548c\u5206\u7c7b\uff0c\u7528\u4e8e\u9519\u8bef\u5904\u7406\u548c\u91cd\u8bd5\u7b56\u7565\u3002","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/version-1.1.x/References/Python SDK References/codes.md","sourceDirName":"References/Python SDK References","slug":"/References/Python SDK References/codes","permalink":"/ROCK/zh-Hans/docs/1.1.x/References/Python SDK References/codes","draft":false,"unlisted":false,"editUrl":"https://github.com/alibaba/ROCK/tree/master/docs/versioned_docs/version-1.1.x/References/Python SDK References/codes.md","tags":[],"version":"1.1.x","lastUpdatedAt":1770782282000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Python SDK \u53c2\u8003","permalink":"/ROCK/zh-Hans/docs/1.1.x/References/Python SDK References/python_sdk"},"next":{"title":"Deploy","permalink":"/ROCK/zh-Hans/docs/1.1.x/References/Python SDK References/deploy"}}');var o=r(74848),t=r(28453);const c={},i="Error Codes",d={},a=[{value:"\u4f7f\u7528\u793a\u4f8b",id:"\u4f7f\u7528\u793a\u4f8b",level:2},{value:"Codes \u5206\u7c7b",id:"codes-\u5206\u7c7b",level:2},{value:"\u91cd\u8bd5\u7b56\u7565\u5efa\u8bae",id:"\u91cd\u8bd5\u7b56\u7565\u5efa\u8bae",level:2},{value:"\u91cd\u8bd5\u793a\u4f8b",id:"\u91cd\u8bd5\u793a\u4f8b",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"error-codes",children:"Error Codes"})}),"\n",(0,o.jsx)(n.p,{children:"\u9519\u8bef\u7801\u5b9a\u4e49\u548c\u5206\u7c7b\uff0c\u7528\u4e8e\u9519\u8bef\u5904\u7406\u548c\u91cd\u8bd5\u7b56\u7565\u3002"}),"\n",(0,o.jsx)(n.h2,{id:"\u4f7f\u7528\u793a\u4f8b",children:"\u4f7f\u7528\u793a\u4f8b"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'import rock\n\ndef test_codes_values():\n    """\u6d4b\u8bd5\u57fa\u672c\u72b6\u6001\u7801\u503c"""\n    assert rock.codes.OK == 2000\n    assert rock.codes.BAD_REQUEST == 4000\n    assert rock.codes.INTERNAL_SERVER_ERROR == 5000\n    assert rock.codes.COMMAND_ERROR == 6000\n'})}),"\n",(0,o.jsx)(n.h2,{id:"codes-\u5206\u7c7b",children:"Codes \u5206\u7c7b"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'OK = 2000, "OK"\n"""\n\u6210\u529f\u72b6\u6001\u7801 (2xxx)\n"""\n\nBAD_REQUEST = 4000, "Bad Request"\n"""\n\u5ba2\u6237\u7aef\u9519\u8bef\u7801 (4xxx):\n\n\u8fd9\u4e9b\u9519\u8bef\u8868\u793a\u5ba2\u6237\u7aef\u8bf7\u6c42\u6709\u95ee\u9898\uff0c\nSDK \u4f1a\u629b\u51fa\u5f02\u5e38\u3002\n"""\n\nINTERNAL_SERVER_ERROR = 5000, "Internal Server Error"\n"""\n\u670d\u52a1\u7aef\u9519\u8bef\u7801 (5xxx):\n\n\u8fd9\u4e9b\u9519\u8bef\u8868\u793a\u670d\u52a1\u7aef\u51fa\u73b0\u95ee\u9898\uff0c\nSDK \u4f1a\u629b\u51fa\u5f02\u5e38\u3002\n"""\n\nCOMMAND_ERROR = 6000, "Command Error"\n"""\n\u547d\u4ee4/\u6267\u884c\u9519\u8bef\u7801 (6xxx):\n\n\u8fd9\u4e9b\u9519\u8bef\u4e0e\u547d\u4ee4\u6267\u884c\u76f8\u5173\uff0c\u7531\u6a21\u578b\u5904\u7406\uff0c\nSDK \u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\n"""\n'})}),"\n",(0,o.jsx)(n.h2,{id:"\u91cd\u8bd5\u7b56\u7565\u5efa\u8bae",children:"\u91cd\u8bd5\u7b56\u7565\u5efa\u8bae"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\u91cd\u8bd5\u89e6\u53d1\u6761\u4ef6"}),": \u53ea\u6709\u5f53 ",(0,o.jsx)(n.code,{children:"INTERNAL_SERVER_ERROR"})," \u65f6\u624d\u9700\u8981\u91cd\u8bd5"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\u5176\u4ed6\u60c5\u51b5\u7684\u5904\u7406\u7b56\u7565"}),":","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"BAD_REQUEST"}),": \u9700\u8981\u68c0\u67e5 arun \u8c03\u7528\u903b\u8f91\u662f\u5426\u6709\u5f02\u5e38"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"COMMAND_ERROR"}),": stdout \u8f93\u51fa\u5230 ",(0,o.jsx)(n.code,{children:"observation.output"}),"\uff0cstderr \u8f93\u51fa\u5230 ",(0,o.jsx)(n.code,{children:"observation.failure_reason"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"COMMAND_ERROR"})," \u8bf4\u660e: \u7531\u4e8e bash \u6267\u884c\u5931\u8d25\u65f6\uff0cstdout/stderr \u53ef\u80fd\u5168\u90e8\u975e\u7a7a\uff0c\u5efa\u8bae\u5c06 observation \u4e2d output \u548c failure_reason \u5168\u90e8 prompt \u7ed9\u6a21\u578b\u8fdb\u884c\u63a8\u7406"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"\u91cd\u8bd5\u793a\u4f8b",children:"\u91cd\u8bd5\u793a\u4f8b"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# Background execution with nohup\nwhile retry_times < retry_limit:\n    try:\n        observation: Observation = await sandbox.arun(\n            "python long_running_script.py",\n            mode="nohup"\n        )\n        if observation.exit_code != 0:\n            logging.warning(\n                f"Command failed with exit code {observation.exit_code}, "\n                f"output: {observation.output}, failure_reason: {observation.failure_reason}"\n            )\n        return observation\n    except RockException as e:\n        if rock.codes.is_server_error(e.code):\n            if retry_times >= retry_limit:\n                logging.error(f"All {retry_limit} attempts failed")\n                raise e\n            else:\n                retry_times += 1\n                logging.error(\n                    f"Server error occurred, code: {e.code}, message: {e.code.get_reason_phrase()}, "\n                    f"exception: {str(e)}, will retry, times: {retry_times}."\n                )\n                await asyncio.sleep(2)\n                continue\n        else:\n            logging.error(\n                f"Non-retriable error occurred, code: {e.code}, message: {e.code.get_reason_phrase()}, exception: {str(e)}."\n            )\n            raise e\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453(e,n,r){r.d(n,{R:()=>c,x:()=>i});var s=r(96540);const o={},t=s.createContext(o);function c(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);