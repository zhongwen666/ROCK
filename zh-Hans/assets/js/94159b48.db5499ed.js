"use strict";(globalThis.webpackChunkrock_docs=globalThis.webpackChunkrock_docs||[]).push([[9607],{28453(e,n,s){s.d(n,{R:()=>a,x:()=>c});var t=s(96540);const o={},r=t.createContext(o);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(r.Provider,{value:n},e.children)}},34651(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>i});const t=JSON.parse('{"id":"References/Python SDK References/file_system","title":"FileSystem","description":"\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\u63a5\u53e3\uff0c\u63d0\u4f9b\u6c99\u7bb1\u73af\u5883\u4e2d\u7684\u6743\u9650\u7ba1\u7406\u548c\u76ee\u5f55\u4e0a\u4f20\u529f\u80fd\u3002","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/version-1.2.x/References/Python SDK References/file_system.md","sourceDirName":"References/Python SDK References","slug":"/References/Python SDK References/file_system","permalink":"/ROCK/zh-Hans/docs/1.2.x/References/Python SDK References/file_system","draft":false,"unlisted":false,"editUrl":"https://github.com/alibaba/ROCK/tree/master/docs/versioned_docs/version-1.2.x/References/Python SDK References/file_system.md","tags":[],"version":"1.2.x","lastUpdatedAt":1770119719000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Deploy","permalink":"/ROCK/zh-Hans/docs/1.2.x/References/Python SDK References/deploy"},"next":{"title":"Model Service\uff08\u5b9e\u9a8c\u6027\uff09","permalink":"/ROCK/zh-Hans/docs/1.2.x/References/Python SDK References/model-service"}}');var o=s(74848),r=s(28453);const a={},c="FileSystem",d={},i=[{value:"chown - \u4fee\u6539\u6240\u6709\u8005",id:"chown---\u4fee\u6539\u6240\u6709\u8005",level:2},{value:"chmod - \u4fee\u6539\u6743\u9650",id:"chmod---\u4fee\u6539\u6743\u9650",level:2},{value:"upload_dir - \u4e0a\u4f20\u76ee\u5f55",id:"upload_dir---\u4e0a\u4f20\u76ee\u5f55",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"filesystem",children:"FileSystem"})}),"\n",(0,o.jsx)(n.p,{children:"\u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c\u63a5\u53e3\uff0c\u63d0\u4f9b\u6c99\u7bb1\u73af\u5883\u4e2d\u7684\u6743\u9650\u7ba1\u7406\u548c\u76ee\u5f55\u4e0a\u4f20\u529f\u80fd\u3002"}),"\n",(0,o.jsx)(n.h2,{id:"chown---\u4fee\u6539\u6240\u6709\u8005",children:"chown - \u4fee\u6539\u6240\u6709\u8005"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from rock.actions.sandbox.request import ChownRequest\n\n# \u521b\u5efa\u8fdc\u7a0b\u7528\u6237\u540e\u4fee\u6539\u6240\u6709\u8005\nawait sandbox.remote_user.create_remote_user("deploy")\n\n# \u83b7\u53d6\u5f53\u524d\u76ee\u5f55\npwd_response = await sandbox.execute(Command(command=["pwd"]))\npwd = pwd_response.stdout.strip()\n\n# \u4fee\u6539\u76ee\u5f55\u6240\u6709\u8005\nawait sandbox.fs.chown(\n    ChownRequest(\n        paths=[pwd],\n        remote_user="deploy",\n        recursive=False,\n    )\n)\n\n# \u9012\u5f52\u4fee\u6539\u76ee\u5f55\u53ca\u5176\u5185\u5bb9\u6240\u6709\u8005\nawait sandbox.fs.chown(\n    ChownRequest(\n        paths=["/home/user/project"],\n        remote_user="deploy",\n        recursive=True,\n    )\n)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"chmod---\u4fee\u6539\u6743\u9650",children:"chmod - \u4fee\u6539\u6743\u9650"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'from rock.actions.sandbox.request import ChmodRequest\n\n# \u521b\u5efa\u6d4b\u8bd5\u76ee\u5f55\nawait sandbox.execute(Command(command=["mkdir", "-p", "/tmp/app"]))\n\n# \u4fee\u6539\u76ee\u5f55\u6743\u9650\nawait sandbox.fs.chmod(\n    ChmodRequest(\n        paths=["/tmp/app"],\n        mode="755",\n        recursive=False,\n    )\n)\n\n# \u9012\u5f52\u4fee\u6539\u6743\u9650\uff08\u5305\u62ec\u5b50\u76ee\u5f55\u548c\u6587\u4ef6\uff09\nawait sandbox.fs.chmod(\n    ChmodRequest(\n        paths=["/tmp/app"],\n        mode="644",\n        recursive=True,\n    )\n)\n\n# \u8bbe\u7f6e\u6700\u9ad8\u6743\u9650\nawait sandbox.fs.chmod(\n    ChmodRequest(\n        paths=["/tmp/shared"],\n        mode="777",\n        recursive=True,\n    )\n)\n'})}),"\n",(0,o.jsx)(n.h2,{id:"upload_dir---\u4e0a\u4f20\u76ee\u5f55",children:"upload_dir - \u4e0a\u4f20\u76ee\u5f55"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'import os\nfrom pathlib import Path\n\n# \u51c6\u5907\u672c\u5730\u76ee\u5f55\nlocal_dir = Path("/Users/foo/my-project")\n(local_dir / "config.json").write_text(\'{"key": "value"}\')\n(local_dir / "app.py").write_text("print(\'hello\')")\n\n# \u4e0a\u4f20\u5230\u6c99\u7bb1\nresult = await sandbox.fs.upload_dir(\n    source_dir=str(local_dir),\n    target_dir="/root/project",\n    extract_timeout=600,\n)\n\nif result.exit_code == 0:\n    print(f"\u4e0a\u4f20\u6210\u529f: {result.output}")\nelse:\n    print(f"\u4e0a\u4f20\u5931\u8d25: {result.failure_reason}")\n'})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);