"use strict";(globalThis.webpackChunkrock_docs=globalThis.webpackChunkrock_docs||[]).push([[7514],{28453(e,n,s){s.d(n,{R:()=>a,x:()=>i});var r=s(96540);const t={},o=r.createContext(t);function a(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(o.Provider,{value:n},e.children)}},43111(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"References/Python SDK References/remote_user","title":"Remote User","description":"\u8fdc\u7a0b\u7528\u6237\u7ba1\u7406\uff0c\u7528\u4e8e\u5728\u6c99\u7bb1\u4e2d\u521b\u5efa\u548c\u7ba1\u7406\u7528\u6237\u3002","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/version-1.1.x/References/Python SDK References/remote_user.md","sourceDirName":"References/Python SDK References","slug":"/References/Python SDK References/remote_user","permalink":"/ROCK/zh-Hans/docs/References/Python SDK References/remote_user","draft":false,"unlisted":false,"editUrl":"https://github.com/alibaba/ROCK/tree/master/docs/versioned_docs/version-1.1.x/References/Python SDK References/remote_user.md","tags":[],"version":"1.1.x","lastUpdatedAt":1770119719000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Model Service\uff08\u5b9e\u9a8c\u6027\uff09","permalink":"/ROCK/zh-Hans/docs/References/Python SDK References/model-service"},"next":{"title":"Rock Agent\uff08\u5b9e\u9a8c\u6027\uff09","permalink":"/ROCK/zh-Hans/docs/References/Python SDK References/rock-agent"}}');var t=s(74848),o=s(28453);const a={},i="Remote User",c={},u=[{value:"\u4f7f\u7528\u793a\u4f8b",id:"\u4f7f\u7528\u793a\u4f8b",level:2},{value:"API",id:"api",level:2},{value:"create_remote_user(username)",id:"create_remote_userusername",level:3},{value:"is_user_exist(username)",id:"is_user_existusername",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"remote-user",children:"Remote User"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fdc\u7a0b\u7528\u6237\u7ba1\u7406\uff0c\u7528\u4e8e\u5728\u6c99\u7bb1\u4e2d\u521b\u5efa\u548c\u7ba1\u7406\u7528\u6237\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u4f7f\u7528\u793a\u4f8b",children:"\u4f7f\u7528\u793a\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import asyncio\nfrom rock.sdk.sandbox.config import SandboxConfig\nfrom rock.sdk.sandbox.client import Sandbox\n\nfrom rock.actions import Action, CreateBashSessionRequest, Observation\n\nasync def test_remote_user():\n    config = SandboxConfig(\n        image='hub.docker.alibaba-inc.com/chatos/python:3.11',\n        xrl_authorization='xxx',\n        cluster='nt-c'\n    )\n    sandbox = Sandbox(config)\n    await sandbox.start()\n\n    await sandbox.remote_user.create_remote_user('rock')\n    assert await sandbox.remote_user.is_user_exist('rock')\n    print('test remote user success')\n\nasync def test_create_session_with_remote_user():\n    config = SandboxConfig(\n        image='hub.docker.alibaba-inc.com/chatos/python:3.11',\n        xrl_authorization='xxx',\n        cluster='nt-c'\n    )\n    sandbox = Sandbox(config)\n    await sandbox.start()\n\n    await sandbox.remote_user.create_remote_user('rock')\n    assert await sandbox.remote_user.is_user_exist('rock')\n\n    await sandbox.create_session(CreateBashSessionRequest(remote_user=\"rock\", session=\"bash\"))\n\n    observation: Observation = await sandbox.run_in_session(\n        action=Action(session=\"bash\", command=\"whoami\")\n    )\n    print(observation)\n    assert observation.output.strip() == \"rock\"\n    print('test create session with remote user success')\n\nif __name__ == '__main__':\n    asyncio.run(test_remote_user())\n    asyncio.run(test_create_session_with_remote_user())\n"})}),"\n",(0,t.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,t.jsx)(n.h3,{id:"create_remote_userusername",children:"create_remote_user(username)"}),"\n",(0,t.jsx)(n.p,{children:"\u521b\u5efa\u8fdc\u7a0b\u7528\u6237\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"await sandbox.remote_user.create_remote_user('username')\n"})}),"\n",(0,t.jsx)(n.h3,{id:"is_user_existusername",children:"is_user_exist(username)"}),"\n",(0,t.jsx)(n.p,{children:"\u68c0\u67e5\u7528\u6237\u662f\u5426\u5b58\u5728\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"exists = await sandbox.remote_user.is_user_exist('username')\n"})})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);